{% extends "layout.html" %}

{% block content %}
<div class="content-box-learn position-relative">
    <!-- Timer in top right -->
    <div class="timer-top-right" id="timer">10</div>
    
    <h2 class="mb-4">{{ item.description }}</h2>
    
    <form method="post">
        <div class="product-section">
            {% for option in item.options %}
                <div class="choice-block">
                    <img src="{{ item.images[loop.index0] }}" 
                         alt="Product option {{ loop.index }}" 
                         class="product-img img-fluid mb-3">
                    <button class="btn-custom-white" name="selected_price" value="{{ option }}">{{ option }}</button>
                </div>
            {% endfor %}
        </div>
    </form>

    <!-- Fixed hover hint -->
    <div class="text-end mt-4 hint-container">
        <a class="hint-link">Need a Hint?</a>
        <div id="hint-text" class="hint-text">{{ item.hint }}</div>
    </div>
</div>

<script>
    // Original hover functionality
    const hintLink = document.querySelector('.hint-link');
    const hintText = document.getElementById('hint-text');
    
    hintLink.addEventListener('mouseenter', () => {
        hintText.style.display = 'block';
    });
    
    hintLink.addEventListener('mouseleave', () => {
        hintText.style.display = 'none';
    });

    // Timer
    let timer = 10;
    const countdown = setInterval(() => {
        timer--;
        document.getElementById('timer').innerText = timer;
        if (timer <= 0) {
            clearInterval(countdown);
            alert("Time's up! This question will be marked as incorrect :(");
            const form = document.querySelector("form");
            const hidden = document.createElement("input");
            hidden.type = "hidden";
            hidden.name = "selected_price";
            hidden.value = "";
            form.appendChild(hidden);
            form.submit();
        }
    }, 1000);
</script>
{% endblock %}